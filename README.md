# Fari の recipe 集 - AArch64 版 QTS 向け

QNAP TS-228A でソフトウェアのビルドに使っている Fari recipe 集。

## 方針

* バイナリは strip する
* 静的ライブラリは入れない
* サーチの対象になるライブラリパス（$prefix/lib）を RPATH や RUNPATH に埋め込まない
  * サーチの対象にならないライブラリパスは RUNPATH に埋め込む（埋め込む必要があれば）
* 必要なコマンドやライブラリはすべて $prefix に持つ
  * 生成されるバイナリは標準のライブラリ（/lib や /usr/lib）にはリンクしない
  * ビルド中に標準のコマンドはなるべく使わないようにしたい
* man ページ，info ページは gzip する
* doc，info，man は $prefix ではなく $prefix/share に置く
* $prefix 以下はインストール時以外は書き換えられることがないようにする
  * $prefix の内容のうち，実行時に書き換えられるものは /var に置く
    * なお QTS の /var は tmpfs
    * インストール時に作成されてその後書き換えられないものは $prefix/var に置く
* 多言語化しない（configure --disable-nls）。英語だけサポートする
* パッケージの依存関係をシンプルにたもつ。使ってもあまり恩恵のない依存パッケージは，かんたんにそれを使わないようにできるなら，使わない
* 拡張属性は扱わない（libattr はインストールしない）
* ACL は扱わない（libacl はインストールしない）

## 準備

1. Fari をインストールする。
1. このレシピ集をローカルに展開する。
1. ~/.farirc を書く。_farirc を参考に。
1. インストール先の容量が十分であることを確認する。それが /usr や /opt の下であれば，QTS ではそこは tmpfs なので，ハードディスクなどにインストール先の実体を用意し，シンボリックリンクを張る。
1. ビルドツール一式が必要なので何とかする。さらに一部のパッケージは BusyBox のコマンドではビルドに不足する。
